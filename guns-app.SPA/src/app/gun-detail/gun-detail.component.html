

<main>
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a [routerLink]="['/']">Home</a></li>
            <li class="breadcrumb-item"><a href="#">Library</a></li>
            <li class="breadcrumb-item active" aria-current="page">Data</li>
          </ol>
        </nav>
      </div>

      <!-- <div class="col-md-12">
        <p>Name: {{this.gun.name}}</p>
        <p>Description: {{this.gun.description}}</p>
        <p>Price: {{this.gun.price}}</p>
      </div> -->
      <div class="col-md-8">


          <img src="../../assets/register_back.png" class="d-block w-100 img_main" alt="...">


        <div class="d-flex flex-direction-row justify-content-around smart_list">
          <!-- <i class="caret"></i>
          <img src="../../assets/register_back.png" alt="..." class="img-thumbnail" (click)="changeMain($event)">
          <img src="../../assets/register_back.png" alt="..." class="img-thumbnail">
          <img src="../../assets/register_back.png" alt="..." class="img-thumbnail">
          <i class="caret"></i> -->

          <div id="carousel_control" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
              <div class="carousel-item active">
                <div class="d-flex flex-direction-row justify-content-center">
                  <img class="d-block w-20" src="../../assets/register_back.png" alt="First slide" (click)="changeMain($event)">
                  <img class="d-block w-20" src="../../assets/register_back.png" alt="Second slide" (click)="changeMain($event)">
                  <img class="d-block w-20" src="../../assets/register_back.png" alt="Second slide" (click)="changeMain($event)">
                </div>
              </div>
              <div class="carousel-item">
                <div class="d-flex flex-direction-row justify-content-center">
                  <img class="d-block w-20" src="../../assets/register_back.png" alt="First slide" (click)="changeMain($event)">
                  <img class="d-block w-20" src="../../assets/login_back.png" alt="Second slide" (click)="changeMain($event)">
                  <img class="d-block w-20" src="../../assets/register_back.png" alt="Second slide" (click)="changeMain($event)">
                </div>
              </div>
              <div class="carousel-item">
                <div class="d-flex flex-direction-row justify-content-center">
                  <img class="d-block w-20" src="../../assets/register_back.png" alt="First slide" (click)="changeMain($event)">
                  <img class="d-block w-20" src="../../assets/register_back.png" alt="First slide"(click)="changeMain($event)">
                  <img class="d-block w-20" src="../../assets/register_back.png" alt="Second slide"(click)="changeMain($event)">
                </div>
              </div>
            </div>
            <a class="carousel-control-prev" href="#carousel_control" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carousel_control" role="button" data-slide="next">
              <span class="pr-4 carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>
          </div>
        </div>
      </div>

      <div class="col-md-4">
        <!-- <img src="../../assets/register_back.png" class="img-fluid img_main" alt="Responsive image">      -->

        <div class="card-group">
          <div class="card">
            <div class="card-body">
              <h4 class="card-title d-flex justify-content-between">               
                <span>{{this.gun?.name}} </span>
                  <div class="text-right">
                    <i class="fa fa-star head"></i>
                     <i class="fa fa-star head"></i>
                    <i class="fa fa-star head"></i>
                    <i class="fa fa-star head"></i>
                    <i class="fa fa-star head"></i>
                  </div>
              </h4>     
              <span class="price_gen d-flex flex-direction-row justify-content-between">{{this.gun.price}} &euro; 
                <span *ngIf="!(this.native_curr === 'EUR')">({{this.afterParse}} {{this.native_curr}})</span> 
                <span class="text-warning">/ each</span>
              </span>   
              <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
              <hr>
              <p class="card-text d-flex justify-content-between">Shipments starts from 5 &euro;<i class="fa fa-truck"></i></p>
              <hr>
              <p class="card-text d-flex justify-content-between">Two weeks  to withdraw from the contract <i class="fa fa-arrow-circle-o-right"></i></p>
              <hr>
              <p class="card-text form-group d-flex justify-content-between align-items-center"> 
                <!--d-flex justify-content-between align-items-center-->
                <label for="amount">Amount</label>
                <input type="number" class="form-control form-control-sm amount" min=1 max=100 value=1 [(ngModel)]="this.quantity"> 
              </p>
            </div>
            <div class="card-footer d-flex justify-content-between">
              <!-- <small class="text-muted">Last updated 3 mins ago</small> -->

              <button class="btn btn-info" *ngIf="this.authServ.currentUser !== null" (click)="addToBasket()">To Basket <i class="fa fa-shopping-cart"></i></button>
              <button class="btn btn-warning ">Purchase now <i class="fa fa-euro"></i></button>

            </div>
          </div>
        </div>
      </div>

    </div>

        <nav>
          <div class="nav nav-tabs" id="nav-tab" role="tablist">
            <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#description" role="tab" aria-controls="nav-home" aria-selected="true">Description</a>
            <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="nav-profile" aria-selected="false">Technicalities</a>
            <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#comments" role="tab" aria-controls="nav-contact" aria-selected="false">Comments</a>
          </div>
        </nav>
        <div class="tab-content description" id="nav-tabContent">
          <div class="tab-pane fade show active description" id="description" role="tabpanel" aria-labelledby="nav-home-tab">

            <div class="row d-flex justify-content-center">
              <div class="col-md-10 pt-2">
                <span>{{this.gun.name}}</span>
                <p class="pt-2">
                  {{this.gun.description}}
                </p>
              </div>
            </div>
            
          </div>
          <div class="tab-pane techs fade" id="profile" role="tabpanel" aria-labelledby="nav-profile-tab">

              <div class="row pt-2 d-flex justify-content-center">

                <!-- To change -->
                <div class="col-10">
                  <table class="table mt-4">
                    <thead>
                      <tr>
                        <th scope="col">#</th>
                        <th scope="col">Params name</th>
                        <th scope="col">Value</th>
                      </tr>
                    </thead>
                    <tbody *ngFor="let tech of this.gun.techs; let i = index">
                      <tr>
                        <th scope="row">{{i+1}}</th>
                        <td>{{tech.name}}</td>
                        <td>{{tech.value}}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

          </div>
          <div class="tab-pane comments fade" id="comments" role="tabpanel" aria-labelledby="nav-contact-tab">

            <div class="row pt-2 d-flex justify-content-center comment_format">
              <div class="col-10 pt-2" *ngFor="let comment of this.gun.comments;">
                <div class="comment border rounded p-3 mt-2">
                  <div class="d-flex justify-content-between">
                    <strong>Autor: {{comment.remarker}} </strong>
                    <strong>Ocena: {{comment.rating}}/5</strong>
                    <strong>Data: {{comment.date | date: 'short'}}</strong>
                  </div>
                  <hr>
                    <p>
                      {{comment.content}}
                    </p>
                </div>
                <!-- <div class="comment border rounded p-1 mt-2">
                  <div class="d-flex justify-content-between">
                    <strong>Autor: Kaczy≈Ñski </strong>
                    <strong>Ocena: 5/5</strong>
                    <strong>Data: asd</strong>
                  </div>
                  <hr>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam tempus tempus libero, vitae maximus magna iaculis quis. Integer mattis fermentum 
                      ex, in pulvinar nulla. Donec mollis, enim eget dapibus pellentesque, enim nunc commodo nisi, in pharetra magna odio et arcu. Vivamus pretium quam vel 
                      commodo porttitor. Nam consectetur turpis non elit iaculis, nec iaculis enim vehicula. Mauris non dignissim neque, nec mollis nisi. Donec ornare suscipit 
                      pretium. Duis ligula dolor, venenatis in posuere et, accumsan ut purus. Aenean sagittis ex in sem tristique, a suscipit ligula interdum. Mauris sit amet nunc odio. 
                      Nunc sit amet lacinia ante. Praesent malesuada lectus massa, sit amet pulvinar erat pharetra eget. Nulla posuere dolor turpis, imperdiet laoreet massa sollicitudin quis. 
                      Proin sed fringilla enim. Curabitur quis sapien id augue efficitur condimentum vitae vel lectus.</p>
                </div> -->
              </div>

                  <div *ngIf="this.gun.comments.length === 0" class="alert alert-warning nothing_alert" role="alert">
                    Nobody leave comment yet. Be first one! <i class="fa fa-arrow-down"></i> 
                    <br>
                    <!-- <span class="req_login" *ngIf="this.authServ.currentUser === null">But first of all, you should be <strong>logged In!</strong></span> -->
                  </div>

            </div>

            <form class="mt-4"
              [ngStyle]="{'opacity': (this.authServ.currentUser !== null)? '1': '0.2',
              'pointer-events': (this.authServ.currentUser !== null)? 'auto': 'none',
              'user-select': (this.authServ.currentUser !== null)? 'auto': 'none'
                }"
              >
              <div class="form-group">
                <label for="exampleFormControlTextarea1">Comment:</label>
                <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" [(ngModel)]="content" name="content"></textarea>
              </div>

              <div class="d-flex justify-content-between text-center">
                  <button class="btn btn-secondary" [disabled]="this.content?.length < 4 || this.rate === 0"
                  (click)="addComment()">Add Comment!</button>
                <strong *ngIf="this.content?.length < 4 || this.rate === 0"> <i class="fa fa-arrow-up">

                </i> Fill the comment and dont forget about your rating! <i class="fa fa-arrow-right"></i></strong>
                <div class="ratings d-flex flex-direction-row">Your rating: 
                  <div *ngFor="let x of this.stars; let i = index">
                    <i class="fa fa-star comment" (click)="letShine(i)"></i>
                  </div>
                </div>
              </div>
          </form>
          <span class="req_login" *ngIf="this.authServ.currentUser === null">But first of all, you should be <strong>logged In!</strong></span>

          </div>
        </div>

  </div>
</main>